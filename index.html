<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ChatBot UI - GPT-4o, 웹 검색, 이미지 생성</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            max-width: 500px;
            width: 90%;
            text-align: center;
        }
        
        .logo {
            font-size: 2.5rem;
            font-weight: bold;
            background: linear-gradient(135deg, #667eea, #764ba2);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 20px;
        }
        
        .subtitle {
            color: #666;
            margin-bottom: 30px;
            line-height: 1.6;
        }
        
        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        
        .feature {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #e9ecef;
        }
        
        .feature-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }
        
        .feature-title {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .feature-desc {
            font-size: 0.9rem;
            color: #666;
        }
        
        .api-key-section {
            margin: 30px 0;
        }
        
        .api-key-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            font-size: 1rem;
            margin-bottom: 15px;
        }
        
        .api-key-input:focus {
            outline: none;
            border-color: #667eea;
        }
        
        .start-btn {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .start-btn:hover {
            transform: translateY(-2px);
        }
        
        .start-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }
        
        .github-link {
            margin-top: 30px;
        }
        
        .github-link a {
            color: #667eea;
            text-decoration: none;
            font-weight: bold;
        }
        
        .github-link a:hover {
            text-decoration: underline;
        }
        
        .status {
            margin-top: 20px;
            padding: 10px;
            border-radius: 5px;
            display: none;
        }
        
        .status.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        
        .status.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="logo">🤖 AI ChatBot UI</div>
        <div class="subtitle">
            GPT-4o, 웹 검색, 이미지 생성이 통합된 올인원 AI 어시스턴트
        </div>
        
        <div class="features">
            <div class="feature">
                <div class="feature-icon">🧠</div>
                <div class="feature-title">GPT-4o 대화</div>
                <div class="feature-desc">자연스러운 한국어/영어 대화</div>
            </div>
            <div class="feature">
                <div class="feature-icon">🎨</div>
                <div class="feature-title">이미지 생성</div>
                <div class="feature-desc">DALL-E 3으로 고품질 이미지</div>
            </div>
            <div class="feature">
                <div class="feature-icon">🔍</div>
                <div class="feature-title">웹 검색</div>
                <div class="feature-desc">실시간 정보 검색</div>
            </div>
        </div>
        
        <div class="api-key-section">
            <input type="password" 
                   class="api-key-input" 
                   id="apiKey" 
                   placeholder="OpenAI API 키를 입력하세요 (sk-...)"
                   autocomplete="off">
            <button class="start-btn" id="startBtn" onclick="validateAndStart()">
                채팅 시작하기
            </button>
        </div>
        
        <div class="status" id="status"></div>
        
        <div class="github-link">
            <a href="https://github.com/muniv/chatgpt_test" target="_blank">
                📁 GitHub 저장소 보기
            </a>
        </div>
    </div>

    <script>
        const apiKeyInput = document.getElementById('apiKey');
        const startBtn = document.getElementById('startBtn');
        const status = document.getElementById('status');
        
        // API 키 입력 시 버튼 활성화/비활성화
        apiKeyInput.addEventListener('input', function() {
            startBtn.disabled = !this.value.trim();
        });
        
        // Enter 키로 시작
        apiKeyInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && this.value.trim()) {
                validateAndStart();
            }
        });
        
        async function validateAndStart() {
            const apiKey = apiKeyInput.value.trim();
            
            if (!apiKey) {
                showStatus('API 키를 입력해주세요.', 'error');
                return;
            }
            
            if (!apiKey.startsWith('sk-')) {
                showStatus('올바른 OpenAI API 키 형식이 아닙니다.', 'error');
                return;
            }
            
            startBtn.disabled = true;
            startBtn.textContent = '검증 중...';
            
            try {
                // API 키 유효성 검사
                const response = await fetch('https://api.openai.com/v1/models', {
                    headers: {
                        'Authorization': `Bearer ${apiKey}`
                    }
                });
                
                if (response.ok) {
                    // API 키를 localStorage에 저장
                    localStorage.setItem('openai_api_key', apiKey);
                    showStatus('API 키가 유효합니다! 채팅을 시작합니다...', 'success');
                    
                    // 간단한 채팅 인터페이스로 이동
                    setTimeout(() => {
                        startChat(apiKey);
                    }, 1000);
                } else {
                    showStatus('유효하지 않은 API 키입니다. 다시 확인해주세요.', 'error');
                }
            } catch (error) {
                showStatus('API 키 검증 중 오류가 발생했습니다.', 'error');
            } finally {
                startBtn.disabled = false;
                startBtn.textContent = '채팅 시작하기';
            }
        }
        
        function showStatus(message, type) {
            status.textContent = message;
            status.className = `status ${type}`;
            status.style.display = 'block';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 5000);
        }
        
        function startChat(apiKey) {
            // 간단한 채팅 인터페이스 생성
            const container = document.querySelector('.container');
            container.innerHTML = `
                <div class="logo">💬 AI 채팅</div>
                <div style="text-align: left; margin: 20px 0;">
                    <div style="background: #f8f9fa; padding: 15px; border-radius: 10px; margin-bottom: 15px;">
                        <strong>AI:</strong> 안녕하세요! API 키로 인증되었습니다. 무엇을 도와드릴까요?
                    </div>
                </div>
                <div style="display: flex; gap: 10px;">
                    <input type="text" 
                           id="messageInput" 
                           placeholder="메시지를 입력하세요..."
                           style="flex: 1; padding: 10px; border: 2px solid #e9ecef; border-radius: 5px;">
                    <button onclick="sendMessage()" 
                            style="padding: 10px 20px; background: #667eea; color: white; border: none; border-radius: 5px; cursor: pointer;">
                        전송
                    </button>
                </div>
                <div id="chatMessages" style="text-align: left; margin-top: 20px; max-height: 300px; overflow-y: auto;"></div>
                <button onclick="location.reload()" 
                        style="margin-top: 20px; padding: 10px 20px; background: #6c757d; color: white; border: none; border-radius: 5px; cursor: pointer;">
                    처음으로 돌아가기
                </button>
            `;
            
            // 메시지 입력 이벤트
            const messageInput = document.getElementById('messageInput');
            messageInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
        }
        
        async function sendMessage() {
            const messageInput = document.getElementById('messageInput');
            const chatMessages = document.getElementById('chatMessages');
            const message = messageInput.value.trim();
            
            if (!message) return;
            
            const apiKey = localStorage.getItem('openai_api_key');
            
            // 사용자 메시지 표시
            chatMessages.innerHTML += `
                <div style="background: #e3f2fd; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                    <strong>사용자:</strong> ${message}
                </div>
            `;
            
            messageInput.value = '';
            messageInput.disabled = true;
            
            try {
                // OpenAI API 호출
                const response = await fetch('https://api.openai.com/v1/chat/completions', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                        'Authorization': `Bearer ${apiKey}`
                    },
                    body: JSON.stringify({
                        model: 'gpt-4o',
                        messages: [
                            {
                                role: 'system',
                                content: '당신은 도움이 되고 친근한 AI 어시스턴트입니다. 한국어로 답변해주세요.'
                            },
                            {
                                role: 'user',
                                content: message
                            }
                        ],
                        max_tokens: 1000,
                        temperature: 0.7
                    })
                });
                
                if (response.ok) {
                    const data = await response.json();
                    const aiResponse = data.choices[0].message.content;
                    
                    // AI 응답 표시
                    chatMessages.innerHTML += `
                        <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                            <strong>AI:</strong> ${aiResponse}
                        </div>
                    `;
                } else {
                    throw new Error('API 호출 실패');
                }
            } catch (error) {
                chatMessages.innerHTML += `
                    <div style="background: #f8d7da; padding: 10px; border-radius: 5px; margin-bottom: 10px;">
                        <strong>오류:</strong> 메시지 전송 중 오류가 발생했습니다.
                    </div>
                `;
            } finally {
                messageInput.disabled = false;
                messageInput.focus();
                chatMessages.scrollTop = chatMessages.scrollHeight;
            }
        }
    </script>
</body>
</html> 